<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Joc de Ghicire</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #e0f7fa, #b3e5fc);
            color: #003366;
            height: 100vh;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            background-color: #b3e5fc;
            border-bottom: 2px solid #81d4fa;
        }

        .navbar-logo {
            height: 80px;
            object-fit: contain;
        }

        .content {
            margin-top: 100px;
            text-align: center;
        }

        .question {
            font-size: 50px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #0288d1;
        }

        .answer {
            font-size: 40px;
            font-weight: bold;
            margin: 20px auto;
            letter-spacing: 5px;
            white-space: pre;
            color: #003366;
        }

        .alphabet {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px auto;
            max-width: 600px;
        }

        .letter-box {
            display: inline-block;
            padding: 10px;
            margin: 5px;
            border: 1px solid #0288d1;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            width: 40px;
            height: 40px;
            font-size: 23px;
            background-color: #b3e5fc;
            color: #003366;
            transition: background-color 0.3s;
        }

        .letter-box:hover {
            background-color: #81d4fa;
        }

        .letter-box.disabled {
            background-color: #cccccc;
            pointer-events: none;
        }

        #help-button {
            display: block;
            margin: 20px auto;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            color: #ffffff;
            background-color: #0288d1;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #help-button:hover {
            background-color: #0277bd;
        }

        .navigation {
            margin-top: 20px;
            position: fixed;
            bottom: 10px;
            left: 10px;
        }

        .nav-button {
            padding: 10px 20px;
            margin: 5px;
            border: 1px solid #0288d1;
            cursor: pointer;
            background-color: #b3e5fc;
            color: #003366;
            border-radius: 5px;
            font-size: 23px;
        }

        .nav-button:hover {
            background-color: #81d4fa;
        }

        .score-timer {
            position: fixed;
            bottom: 10px;
            right: 10px;
            text-align: right;
            font-size: 30px;
            font-weight: bold;
            background-color: rgba(179, 229, 252, 0.8);
            color: #003366;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);

        }
        #game-timer, #total-score, #question-score {
            margin: 5px 0;
        }
    </style>
</head>
<body>
<div class="navbar">
    <img src="photos/sigla-standard-RGB-Photoroom.png" alt="Sigla" class="navbar-logo">
    <img src="photos/logo-asus.png" alt="Logo ASUS" class="navbar-logo">
</div>

<div class="content">
    <div class="question" id="question"></div>
    <div class="answer" id="answer"></div>
    <div class="alphabet" id="alphabet"></div>
    <button id="help-button" onclick="revealRandomLetter()">Ajutor</button>
    <div class="navigation">
        <button class="nav-button" onclick="prevQuestion()">⬅️ Înapoi</button>
        <button class="nav-button" onclick="nextQuestion()">➡️ Înainte</button>
        <button class="nav-button" onclick="newGame()">Joc nou</button>
    </div>
    <div class="score-timer">
        <div id="total-score">Scor total: 0</div>
        <div id="question-score">Scor întrebare: 500</div>
        <div id="game-timer">Timp joc: 120</div>
    </div>
</div>

<script>
    const questions = [
        ["Care este capitala României?", "București"],
        ["Ce culoare are cerul?", "Albastru"],
        ["Câte zile are o săptămână?", "Șapte"]
    ];

    let currentQuestionIndex = parseInt(localStorage.getItem("lastQuestionIndex")) || 0;
    let totalScore = 0;
    let questionScore = 500;
    let gameTimerInterval;
    let gameTimeRemaining = 20;

    function renderQuestion() {
        questionScore = 500;
        updateScores();

        document.getElementById("help-button").disabled = false;

        const question = questions[currentQuestionIndex][0];
        const answer = questions[currentQuestionIndex][1];
        const answerDiv = document.getElementById("answer");
        const alphabetDiv = document.getElementById("alphabet");

        document.getElementById("question").textContent = `Întrebare: ${question}`;
        answerDiv.textContent = "";
        for (let i = 0; i < answer.length; i++) {
            answerDiv.textContent += answer[i] === " " ? " " : "_ ";
        }

        alphabetDiv.innerHTML = "";
        const alphabet = "AĂÂBCDEFGHIÎJKLMNOPQRSȘTȚUVWXYZ";
        for (const letter of alphabet) {
            const letterBox = document.createElement("div");
            letterBox.className = "letter-box";
            letterBox.textContent = letter;
            letterBox.onclick = () => requestLetter(letter);
            alphabetDiv.appendChild(letterBox);
        }
    }

    function startGameTimer() {
        gameTimerInterval = setInterval(() => {
            gameTimeRemaining--;
            document.getElementById("game-timer").textContent = formatTime(gameTimeRemaining);
            if (gameTimeRemaining <= 0) {
                clearInterval(gameTimerInterval);
                alert(`Joc terminat! Scor final: ${totalScore}`);
            }
        }, 1000);
    }

    function revealRandomLetter() {
        if (questionScore <= 0) {
            document.getElementById("help-button").disabled = true;
            return;
        }

        const answer = questions[currentQuestionIndex][1].toUpperCase();
        const answerDiv = document.getElementById("answer");
        const currentAnswer = answerDiv.textContent.replace(/\s/g, "");
        const unguessedLetters = [];

        for (let i = 0; i < answer.length; i++) {
            if (answer[i] !== " " && currentAnswer[i] === "_") {
                unguessedLetters.push(answer[i]);
            }
        }

        if (unguessedLetters.length > 0) {
            const randomLetter = unguessedLetters[Math.floor(Math.random() * unguessedLetters.length)];
            checkLetter(randomLetter);
            questionScore -= 100;
            updateScores();
        } else {
            alert("Nu mai sunt litere de ghicit!");
        }
    }

    function requestLetter(letter) {
        const letterBoxes = document.querySelectorAll(".letter-box");
        letterBoxes.forEach(box => {
            if (box.textContent === letter) {
                box.classList.add("disabled");
                box.onclick = null;
            }
        });

        checkLetter(letter);
    }

    function checkLetter(letter) {
        const answer = questions[currentQuestionIndex][1].toUpperCase();
        const answerDiv = document.getElementById("answer");
        const currentAnswer = answerDiv.textContent.replace(/\s/g, "");
        let updatedAnswer = "";

        for (let i = 0; i < answer.length; i++) {
            if (answer[i].toUpperCase() === letter) {
                updatedAnswer += answer[i];
            } else if (currentAnswer[i] !== "_") {
                updatedAnswer += currentAnswer[i];
            } else {
                updatedAnswer += "_";
            }
        }

        answerDiv.textContent = updatedAnswer.split("").join(" ");

        if (!updatedAnswer.includes("_")) {
            totalScore += questionScore;
            updateScores();
            alert("Felicitări! Ai ghicit răspunsul corect!");
            nextQuestion();
        }
    }

    function updateScores() {
        document.getElementById("total-score").textContent = `Scor total: ${totalScore}`;
        document.getElementById("question-score").textContent = `Scor întrebare: ${questionScore}`;
    }

    function nextQuestion() {
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            localStorage.setItem("lastQuestionIndex", currentQuestionIndex);
            renderQuestion();
        } else {
            alert("Nu mai sunt întrebări! Joc terminat.");
            clearInterval(gameTimerInterval);
        }
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            localStorage.setItem("lastQuestionIndex", currentQuestionIndex);
            renderQuestion();
        }
    }
    function newGame() {
        let lastQuestionIndex = parseInt(localStorage.getItem("lastQuestionIndex")) || 0;
        let nextQuestionIndex = (lastQuestionIndex + 1) % questions.length; // Move to the next question, wrap around if needed
        localStorage.setItem("lastQuestionIndex", nextQuestionIndex);
        window.location.href = "index.html";
    }

    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = seconds % 60;
        return `${minutes}:${remainingSeconds.toString().padStart(2, "0")}`;
    }

    document.addEventListener("keydown", (event) => {
        const letter = event.key.toUpperCase();
        const alphabet = "AĂÂBCDEFGHIÎJKLMNOPQRSȘTȚUVWXYZ";
        if (alphabet.includes(letter)) {
            requestLetter(letter);
        }
    });

    document.getElementById("game-timer").textContent = formatTime(gameTimeRemaining);
    startGameTimer();
    renderQuestion();
</script>
</body>
</html>